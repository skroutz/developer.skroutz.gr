:language: php
:code: |
  <?php
  /**
   * Builds an Analytics Ecommerce addOrder action.
   *
   * @param array $order The completed order to report.
   * @return string The JavaScript representation of an Analytics Ecommerce
   *  addOrder action.
   */
  function addOrderAction(&$order) {
    $order_data = json_encode(array(
      'id'        => $order['id'],
      'revenue'   => $order['revenue'],
      'shipping'  => $order['shipping'],
      'tax'       => $order['tax']
    ));

    return "sa('ecommerce', 'addOrder', {$order_data});";
  }

  /**
   * Builds an Analytics Ecommerce addItem action.
   *
   * @param int $orderID The ID of the order
   * @param array $item The purchesed item to report
   * @return string The JavaScript representation of an Analytics Ecommerce
   *  addItem action.
   */
  function addItemAction($orderID, &$item) {
    $item_data = json_encode(array(
      'order_id'    => $orderID,
      'product_id'  => $item['id'],
      'price'       => $item['price'],
      'quantity'    => $item['quantity']
    ));

    return "sa('ecommerce', 'addItem', '{$item_data}');";
  }
  ?>
